<div style="white-space: nowrap; position: relative;">
    <span *ngIf="readOnly; else editableBlock" [ngClass]="inputClass">
        <input *ngIf="checkBox; else anyValue" type="checkbox" disabled [checked]="value"/>
        <ng-template #anyValue>
            <span>{{value}}</span>
        </ng-template>
    </span>
    <div *ngIf="data.userEdit?.prevValue" class="prevValue" style="line-height: 85%;">
        ({{prevValue}})
    </div>
    <ng-template #editableBlock>
        <div *ngIf="checkBox; else select" class="checkBox">
            <input type="checkbox" [class]="inputClass" [checked]="value" (change)="onChangeCheckBox($event)"/>
            <div class="error">{{error}}</div>
        </div>
        <ng-template #select>
            <select *ngIf="options; else textEdit" [ngClass]="inputClass" (change)="saveSelect($event)">
                <option *ngFor="let o of options" [value]="o" [selected]="isSelected(o)">{{o}}</option>
            </select>
            <div class="error">{{error}}</div>
        </ng-template>
        <ng-template #textEdit>
            <div class="input">
                <input class="editable" [ngClass]="inputClass" type="text" [value]="value"
                (focus)="onFocus()" (blur)="onBlur($event)" (keydown)="keyDown($event)" (change)="onChange($event)" #input/>
                <div class="error">{{error}}</div>
            </div>
        </ng-template>
        <div class="editButtons">
            <div [class]="{delete: true, button: true, disabled: !canDelete}" *ngIf="data.userEdit && !hasFocus">
                <mat-icon (click)="delete()" title="Delete edit" [inline]="true">cancel</mat-icon>
            </div>
            <div class="cancel button" *ngIf="hasFocus" (click)="cancel($event)" (mousedown)="mouseDown($event)">
                <mat-icon title="Cancel edit" [inline]="true">close</mat-icon>
            </div>
        </div>
    </ng-template>
</div>
